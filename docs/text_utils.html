---

title: Text Utils

keywords: fastai
sidebar: home_sidebar

summary: "Text utilities."
description: "Text utilities."
nb_path: "10a_text_utils.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 10a_text_utils.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>For this project, a map of module to notebook names might look like:</p>
<div class="highlight"><pre><span></span><span class="n">module_index</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;core&quot;</span><span class="p">:</span> <span class="s2">&quot;00_core.ipynb&quot;</span><span class="p">,</span>
                <span class="s2">&quot;apple&quot;</span><span class="p">:</span> <span class="s2">&quot;00a_apple.ipynb&quot;</span><span class="p">,</span>
                <span class="s2">&quot;text.core&quot;</span><span class="p">:</span> <span class="s2">&quot;10_text_core.ipynb&quot;</span><span class="p">,</span>
                <span class="s2">&quot;text.util&quot;</span><span class="p">:</span> <span class="s2">&quot;10a_text_utils.ipynb&quot;</span><span class="p">}</span>
</pre></div>
<h2 id="Why-write-a-map-of-module-to-notebook-names-to-_nbdev.py?">Why write a map of module to notebook names to <code>_nbdev.py</code>?<a class="anchor-link" href="#Why-write-a-map-of-module-to-notebook-names-to-_nbdev.py?"> </a></h2><h3 id="So-doc_link-doesn't-have-to-assume-these-names-correspond">So doc_link doesn't have to assume these names correspond<a class="anchor-link" href="#So-doc_link-doesn't-have-to-assume-these-names-correspond"> </a></h3><p>We can't doc link to our <code>text.core</code> module because we've used a notebook name that does not correspond to the module name:</p>
<p>We have "10_text_core.ipynb"</p>
<ul>
<li><code>doc_link</code> wants to map "text.core" to "text.core.html" but</li>
<li><code>_nb2htmlfname</code> maps "10_text_core.ipynb" to "text_core.html"</li>
</ul>
<p>nbdev allows module names to be different to notebook names via <code>%nbdev_default_export</code> but ... <code>doc_link</code> forces them to be the same (if you want backtick links to your modules).</p>
<p>Notice how the link to <a href="/nbdev_demo/text_core.html#core_text_fn"><code>core_text_fn</code></a> finds it's way to "text_core.html" - because it uses <code>_nbdev#index</code> to map function names to notebook names.</p>
<h3 id="So-you-don't-need-your-project-to-be-in-sys.path">So you don't need your project to be in <code>sys.path</code><a class="anchor-link" href="#So-you-don't-need-your-project-to-be-in-sys.path"> </a></h3><p>When <code>doc_link</code> checks <code>is_lib_module</code> we:</p>
<p><code>importlib.import_module(f'{Config().lib_name}.{name}')</code></p>
<p>Building docs for this new project in a conda env means no module links are created - I'm not sure why <code>importlib.import_module</code> fails when <code>show_doc</code> still finds functions etc to display - but ...</p>
<p><code>pip install -e .</code> adds the project to <code>sys.path</code> and <code>is_lib_module</code> can import them.</p>
<p>I'd like to fix this by changing <code>is_lib_module</code> to use <code>module_index</code> (or <code>_nbdev#modules</code> if you don't want to introduce <code>module_index</code>).</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="text_util_fn" class="doc_header"><code>text_util_fn</code><a href="https://github.com/pete88b/nbdev_demo/tree/main/nbdev_demo/text/utils.py#L9" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>text_util_fn</code>()</p>
</blockquote>
<p>Adds some behaviour to <a href="/nbdev_demo/text_core.html#core_text_fn"><code>core_text_fn</code></a></p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

